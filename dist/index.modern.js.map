{"version":3,"file":"index.modern.js","sources":["../src/components/ControlButton.tsx","../src/components/AudioSelectButton.tsx","../src/components/VideoSelectButton.tsx","../src/components/ControlsView.tsx","../src/components/DisplayContext.tsx","../src/components/ParticipantView.tsx","../src/components/ScreenShareView.tsx","../src/components/desktop/GridStage.tsx","../src/components/StageUtils.ts","../src/components/desktop/SpeakerStage.tsx","../src/components/mobile/MobileStage.tsx","../src/components/StageView.tsx","../src/LiveKitRoom.tsx"],"sourcesContent":["import { faChevronDown, faPhone, IconDefinition } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React, { ReactElement, useState } from 'react';\nimport { Popover } from 'react-tiny-popover';\nimport styles from './styles.module.css';\n\nexport interface MenuItem {\n  label: string;\n}\ninterface ButtonProps {\n  label: string;\n  disabled?: boolean;\n  onClick?: () => void;\n  icon?: IconDefinition;\n  className?: string;\n  popoverContainerClassName?: string;\n  popoverTriggerBtnClassName?: string;\n  popoverTriggerBtnSeparatorClassName?: string;\n  menuItems?: MenuItem[];\n  onMenuItemClick?: (item: MenuItem) => void;\n}\n\nexport const ControlButton = ({\n  // label,\n  disabled,\n  onClick,\n  icon,\n  className,\n  menuItems,\n  popoverContainerClassName,\n  popoverTriggerBtnClassName,\n  popoverTriggerBtnSeparatorClassName,\n  onMenuItemClick,\n}: ButtonProps) => {\n  const [menuVisible, setMenuVisible] = useState(false);\n\n  let classes = styles.button;\n  if (className) {\n    classes += ` ${className}`;\n  }\n\n  const handleMenuClick = (item: MenuItem) => {\n    setMenuVisible(false);\n    if (onMenuItemClick) {\n      onMenuItemClick(item);\n    }\n  };\n\n  let menuTrigger: ReactElement | undefined;\n  let menu: ReactElement = <div />;\n  if (menuItems && menuItems.length > 0) {\n    classes += ` ${styles.hasDropdown}`;\n    menuTrigger = (\n      <button\n        disabled={disabled}\n        className={`${styles.button} ${popoverTriggerBtnClassName}  ${styles.dropdown}`}\n        onClick={() => setMenuVisible(!menuVisible)}\n      >\n        <div className={`${styles.separator} ${popoverTriggerBtnSeparatorClassName}`} />\n        <FontAwesomeIcon height={32} icon={faChevronDown} />\n      </button>\n    );\n\n    menu = (\n      <div className={`${styles.popoverMenu} ${popoverContainerClassName}`}>\n        <ul className={styles.list}>\n          {menuItems?.map((item, i) => {\n            return (\n              <li key={i} onClick={() => handleMenuClick(item)}>\n                {item.label}\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n\n  const mainContent = (\n    <button\n      disabled={disabled}\n      className={classes}\n      onClick={() => {\n        setMenuVisible(false);\n        if (onClick) onClick();\n      }}\n      style={{\n        borderRadius: \"100%\",\n        width: \"70px\",\n        height: \"70px\",\n        backgroundColor:icon ? \"black\" :\"#D10000\"\n        // justifyContent: \"center\",\n        // alignItems: \"center\",\n      }}\n    >\n      {icon ? <FontAwesomeIcon className={styles.icon} height={32} icon={icon} /> : <FontAwesomeIcon icon={faPhone} style={{color:\"#ffffff\", transform: \"rotate(135deg)\"}} />}\n      {/* {!icon && <FontAwesomeIcon icon={faPhone} style={{color: \"#ffffff\"}} />} */}\n      {/* {label} */}\n    </button>\n  );\n\n  if (!menuTrigger) {\n    return mainContent;\n  }\n\n  return (\n    <Popover isOpen={menuVisible} positions={['top']} content={menu}>\n      <div className={styles.buttonWrapper}>\n        {mainContent}\n        {/* {menuTrigger} */}\n      </div>\n    </Popover>\n  );\n};\n","import { faMicrophone, faMicrophoneSlash } from '@fortawesome/free-solid-svg-icons';\nimport { Room } from 'livekit-client';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { ControlButton, MenuItem } from './ControlButton';\n\nexport interface AudioSelectButtonProps {\n  isMuted: boolean;\n  onClick?: () => void;\n  onSourceSelected?: (device: MediaDeviceInfo) => void;\n  isButtonDisabled?: boolean;\n  muteText?: string;\n  unmuteText?: string;\n  className?: string;\n  requestPermissions?: boolean;\n  popoverContainerClassName?: string;\n  popoverTriggerBtnClassName?: string;\n  popoverTriggerBtnSeparatorClassName?: string;\n}\n\nexport const AudioSelectButton = ({\n  isMuted,\n  onClick,\n  onSourceSelected,\n  isButtonDisabled,\n  muteText = 'Mute',\n  unmuteText = 'Unmute',\n  requestPermissions = true,\n  className,\n  popoverContainerClassName,\n  popoverTriggerBtnClassName,\n  popoverTriggerBtnSeparatorClassName,\n}: AudioSelectButtonProps) => {\n  const [sources, setSources] = useState<MediaDeviceInfo[]>([]);\n  const [menuItems, setMenuItems] = useState<MenuItem[]>([]);\n\n  const listAudioDevices = useCallback(async () => {\n    const devices = await Room.getLocalDevices('audioinput', requestPermissions);\n    setSources(devices);\n    setMenuItems(\n      devices.map((item) => {\n        return { label: item.label };\n      }),\n    );\n  }, []);\n\n  useEffect(() => {\n    listAudioDevices();\n    navigator.mediaDevices.addEventListener('devicechange', listAudioDevices);\n\n    return () => {\n      navigator.mediaDevices.removeEventListener('devicechange', listAudioDevices);\n    };\n  }, []);\n\n  const handleMenuItem = (item: MenuItem) => {\n    const device = sources.find((d) => d.label === item.label);\n    if (device && onSourceSelected) {\n      onSourceSelected(device);\n    }\n  };\n\n  return (\n    <ControlButton\n      label={isMuted ? unmuteText : muteText}\n      icon={isMuted ? faMicrophoneSlash : faMicrophone}\n      disabled={isButtonDisabled}\n      onClick={onClick}\n      menuItems={menuItems}\n      onMenuItemClick={handleMenuItem}\n      className={className}\n      popoverContainerClassName={popoverContainerClassName}\n      popoverTriggerBtnClassName={popoverTriggerBtnClassName}\n      popoverTriggerBtnSeparatorClassName={popoverTriggerBtnSeparatorClassName}\n    />\n  );\n};\n","import { faVideo, faVideoSlash } from '@fortawesome/free-solid-svg-icons';\nimport { Room } from 'livekit-client';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { ControlButton, MenuItem } from './ControlButton';\n\nexport interface VideoSelectButtonProps {\n  isEnabled: boolean;\n  onClick?: () => void;\n  onSourceSelected?: (device: MediaDeviceInfo) => void;\n  disableText?: string;\n  enableText?: string;\n  requestPermissions?: boolean;\n  className?: string;\n  isButtonDisabled?: boolean;\n  popoverContainerClassName?: string;\n  popoverTriggerBtnClassName?: string;\n  popoverTriggerBtnSeparatorClassName?: string;\n}\n\nexport const VideoSelectButton = ({\n  isEnabled,\n  onClick,\n  onSourceSelected,\n  disableText = 'Disable Video',\n  enableText = 'Enable Video',\n  requestPermissions = true,\n  className,\n  isButtonDisabled,\n  popoverContainerClassName,\n  popoverTriggerBtnClassName,\n  popoverTriggerBtnSeparatorClassName,\n}: VideoSelectButtonProps) => {\n  const [sources, setSources] = useState<MediaDeviceInfo[]>([]);\n  const [menuItems, setMenuItems] = useState<MenuItem[]>([]);\n\n  const listVideoDevices = useCallback(async () => {\n    const devices = await Room.getLocalDevices('videoinput', requestPermissions);\n    setSources(devices);\n    setMenuItems(\n      devices.map((item) => {\n        return { label: item.label };\n      }),\n    );\n  }, []);\n\n  useEffect(() => {\n    listVideoDevices();\n    navigator.mediaDevices.addEventListener('devicechange', listVideoDevices);\n    return () => {\n      navigator.mediaDevices.removeEventListener('devicechange', listVideoDevices);\n    };\n  }, []);\n\n  const handleMenuItem = (item: MenuItem) => {\n    const device = sources.find((d) => d.label === item.label);\n    if (device && onSourceSelected) {\n      onSourceSelected(device);\n    }\n  };\n\n  return (\n    <ControlButton\n      label={isEnabled ? disableText : enableText}\n      icon={isEnabled ? faVideo : faVideoSlash}\n      disabled={isButtonDisabled}\n      onClick={onClick}\n      menuItems={menuItems}\n      onMenuItemClick={handleMenuItem}\n      className={className}\n      popoverContainerClassName={popoverContainerClassName}\n      popoverTriggerBtnClassName={popoverTriggerBtnClassName}\n      popoverTriggerBtnSeparatorClassName={popoverTriggerBtnSeparatorClassName}\n    />\n  );\n};\n","import { faDesktop, faStop } from '@fortawesome/free-solid-svg-icons';\nimport { Room } from 'livekit-client';\nimport React, { ReactElement } from 'react';\nimport { useParticipant } from '@livekit/react-core';\nimport { AudioSelectButton } from './AudioSelectButton';\nimport { ControlButton } from './ControlButton';\nimport styles from './styles.module.css';\nimport { VideoSelectButton } from './VideoSelectButton';\n\nexport interface ControlsProps {\n  room: Room;\n  enableScreenShare?: boolean;\n  enableAudio?: boolean;\n  enableVideo?: boolean;\n  onLeave?: (room: Room) => void;\n}\n\nexport const ControlsView = ({\n  room,\n  enableScreenShare,\n  enableAudio,\n  enableVideo,\n  onLeave,\n}: ControlsProps) => {\n  const { cameraPublication: camPub, microphonePublication: micPub } = useParticipant(\n    room.localParticipant,\n  );\n\n  if (enableScreenShare === undefined) {\n    enableScreenShare = true;\n  }\n  if (enableVideo === undefined) {\n    enableVideo = true;\n  }\n  if (enableAudio === undefined) {\n    enableAudio = true;\n  }\n\n  const [audioButtonDisabled, setAudioButtonDisabled] = React.useState(false);\n  let muteButton: ReactElement | undefined;\n  if (enableAudio) {\n    const enabled = !(micPub?.isMuted ?? true);\n    muteButton = (\n      <AudioSelectButton\n        isMuted={!enabled}\n        isButtonDisabled={audioButtonDisabled}\n        onClick={async () => {\n          setAudioButtonDisabled(true);\n          room.localParticipant\n            .setMicrophoneEnabled(!enabled)\n            .finally(() => setAudioButtonDisabled(false));\n        }}\n        onSourceSelected={(device) => {\n          setAudioButtonDisabled(true);\n          room\n            .switchActiveDevice('audioinput', device.deviceId)\n            .finally(() => setAudioButtonDisabled(false));\n        }}\n      />\n    );\n  }\n\n  const [videoButtonDisabled, setVideoButtonDisabled] = React.useState(false);\n\n  let videoButton: ReactElement | undefined;\n  if (enableVideo) {\n    const enabled = !(camPub?.isMuted ?? true);\n    videoButton = (\n      <VideoSelectButton\n        isEnabled={enabled}\n        isButtonDisabled={videoButtonDisabled}\n        onClick={() => {\n          setVideoButtonDisabled(true);\n          room.localParticipant\n            .setCameraEnabled(!enabled)\n            .finally(() => setVideoButtonDisabled(false));\n        }}\n        onSourceSelected={(device) => {\n          setVideoButtonDisabled(true);\n          room\n            .switchActiveDevice('videoinput', device.deviceId)\n            .finally(() => setVideoButtonDisabled(false));\n        }}\n      />\n    );\n  }\n\n  const [screenButtonDisabled, setScreenButtonDisabled] = React.useState(false);\n  let screenButton: ReactElement | undefined;\n  if (enableScreenShare) {\n    const enabled = room.localParticipant.isScreenShareEnabled;\n    screenButton = (\n      <ControlButton\n        label={enabled ? 'Stop sharing' : 'Share screen'}\n        icon={enabled ? faStop : faDesktop}\n        disabled={screenButtonDisabled}\n        onClick={() => {\n          setScreenButtonDisabled(true);\n          room.localParticipant\n            .setScreenShareEnabled(!enabled)\n            .finally(() => setScreenButtonDisabled(false));\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.controlsWrapper}>\n      {muteButton}\n      {videoButton}\n      {screenButton}\n      {onLeave && (\n        <ControlButton\n          label=\"End\"\n          className={styles.dangerButton}\n          onClick={() => {\n            room.disconnect();\n            onLeave(room);\n          }}\n        />\n      )}\n    </div>\n  );\n};\n","import React from 'react';\n\nexport interface DisplayOptions {\n  stageLayout?: string;\n  /** display debugging stats */\n  showStats?: boolean;\n}\n\nexport const DisplayContext = React.createContext<DisplayOptions>({\n  stageLayout: 'grid',\n  showStats: false,\n});\n","import React, {\n  CSSProperties,\n  ReactElement,\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from \"react\";\nimport {\n  faMicrophone,\n  faMicrophoneSlash,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Property } from \"csstype\";\nimport {\n  ConnectionQuality,\n  LocalTrack,\n  Participant,\n  RemoteTrack,\n} from \"livekit-client\";\nimport { useParticipant, VideoRenderer } from \"@livekit/react-core\";\n\nimport { AspectRatio } from \"react-aspect-ratio\";\nimport { ReactComponent as connectionQuality1 } from \"../../static/connection-quality-1.svg\";\nimport { ReactComponent as connectionQuality2 } from \"../../static/connection-quality-2.svg\";\nimport { ReactComponent as connectionQuality3 } from \"../../static/connection-quality-3.svg\";\nimport { DisplayContext } from \"./DisplayContext\";\nimport styles from \"./styles.module.css\";\n\nexport interface ParticipantProps {\n  participant: Participant;\n  displayName?: string;\n  // width in CSS\n  width?: Property.Width;\n  // height in CSS\n  height?: Property.Height;\n  className?: string;\n  // aspect ratio width, if set, maintains aspect ratio\n  aspectWidth?: number;\n  // aspect ratio height\n  aspectHeight?: number;\n  // determine whether to contain or cover video.\n  // cover mode is used when layout orientation matches video orientation\n  orientation?: \"landscape\" | \"portrait\";\n  // true if overlay with participant info should be shown\n  showOverlay?: boolean;\n  // true if connection quality should be shown\n  showConnectionQuality?: boolean;\n  // additional classname when participant is currently speaking\n  speakerClassName?: string;\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n  onClick?: () => void;\n}\n\nexport const ParticipantView = ({\n  participant,\n  width,\n  height,\n  className,\n  speakerClassName,\n  aspectWidth,\n  aspectHeight,\n  orientation,\n  displayName,\n  showOverlay,\n  showConnectionQuality,\n  onMouseEnter,\n  onMouseLeave,\n  onClick,\n}: ParticipantProps) => {\n  const { cameraPublication, isLocal, connectionQuality, isSpeaking } =\n    useParticipant(participant);\n  const [videoSize, setVideoSize] = useState<string>();\n  const [currentBitrate, setCurrentBitrate] = useState<number>();\n  const context = useContext(DisplayContext);\n\n  const handleResize = useCallback((width: number, height: number) => {\n    setVideoSize(`${width}x${height}`);\n  }, []);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      let total = 0;\n      participant.tracks.forEach((pub) => {\n        if (\n          pub.track instanceof LocalTrack ||\n          pub.track instanceof RemoteTrack\n        ) {\n          total += pub.track.currentBitrate;\n        }\n      });\n      setCurrentBitrate(total);\n    }, 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n\n  const containerStyles: CSSProperties = {\n    width: width,\n    height: height,\n  };\n\n  // when aspect matches, cover instead\n  let objectFit: Property.ObjectFit = \"contain\";\n  let videoOrientation: \"landscape\" | \"portrait\" | undefined;\n  if (!orientation && aspectWidth && aspectHeight) {\n    orientation = aspectWidth > aspectHeight ? \"landscape\" : \"portrait\";\n  }\n  if (cameraPublication?.dimensions) {\n    videoOrientation =\n      cameraPublication.dimensions.width > cameraPublication.dimensions.height\n        ? \"landscape\"\n        : \"portrait\";\n  }\n\n  if (videoOrientation === orientation) {\n    objectFit = \"cover\";\n  }\n\n  if (!displayName) {\n    displayName = participant.name || participant.identity;\n    if (isLocal) {\n      displayName += \" (You)\";\n    }\n  }\n\n  let mainElement: ReactElement;\n  if (\n    cameraPublication?.isSubscribed &&\n    cameraPublication?.track &&\n    !cameraPublication?.isMuted\n  ) {\n    mainElement = (\n      <VideoRenderer\n        track={cameraPublication.track}\n        isLocal={isLocal}\n        objectFit={objectFit}\n        width=\"100%\"\n        height=\"100%\"\n        className={styles.video}\n        onSizeChanged={handleResize}\n      />\n    );\n  } else {\n    mainElement = (\n      <div>\n        <div style={{backgroundColor: \"#2f2f2f\", borderRadius:\"8px\"}} \n        // className={styles.placeholder}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"center\",\n            }}\n          >\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                border: \"2px solid teal\",\n                borderRadius: \"8px\",\n                width: \"500px\",\n                height: \"300px\",\n              }}\n            >\n              <span style={{\n                  background: `linear-gradient(62deg, #13547a 0%, #80d0c7 100%)`,\n                  height:\"150px\",\n                  width:\"150px\",\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\",\n                  borderRadius: \"50%\",\n                  fontSize: \"64px\",\n                }}\n              >\n                {participant.identity?.charAt(0).toUpperCase()}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const classes = [styles.participant];\n  if (className) {\n    classes.push(className);\n  }\n  if (isSpeaking) {\n    classes.push(speakerClassName ?? styles.speaker);\n  }\n  const isAudioMuted = !participant.isMicrophoneEnabled;\n\n  // gather stats\n  let statsContent: ReactElement | undefined;\n  if (context.showStats) {\n    statsContent = (\n      <div className={styles.stats}>\n        <span>{videoSize}</span>\n        {currentBitrate !== undefined && currentBitrate > 0 && (\n          <span>&nbsp;{Math.round(currentBitrate / 1024)} kbps</span>\n        )}\n      </div>\n    );\n  }\n\n  let ConnectionQualityIndicator: typeof connectionQuality1 | undefined;\n  if (showConnectionQuality) {\n    switch (connectionQuality) {\n      case ConnectionQuality.Excellent:\n        ConnectionQualityIndicator = connectionQuality3;\n        break;\n      case ConnectionQuality.Good:\n        ConnectionQualityIndicator = connectionQuality2;\n        break;\n      case ConnectionQuality.Poor:\n        ConnectionQualityIndicator = connectionQuality1;\n        break;\n    }\n  }\n\n  return (\n    <div\n      className={classes.join(\" \")}\n      style={containerStyles}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      onClick={onClick}\n    >\n      {aspectWidth && aspectHeight && (\n        <AspectRatio ratio={aspectWidth / aspectHeight}>\n          {mainElement}\n        </AspectRatio>\n      )}\n      {(!aspectWidth || !aspectHeight) && mainElement}\n\n      {(showOverlay || context.showStats) && (\n        <div className={styles.participantBar} style={{display:\"none\"}}>\n          {/* <div className={styles.name}>{displayName}</div> */}\n          <div className={styles.center}>{statsContent}</div>\n          <div>\n            {ConnectionQualityIndicator && <ConnectionQualityIndicator />}\n          </div>\n          <div>\n            <FontAwesomeIcon\n              icon={isAudioMuted ? faMicrophoneSlash : faMicrophone}\n              height={24}\n              className={isAudioMuted ? styles.iconRed : styles.iconNormal}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","import { Property } from 'csstype';\nimport { Track } from 'livekit-client';\nimport { VideoRenderer } from '@livekit/react-core';\n\nimport React from 'react';\nimport styles from './styles.module.css';\n\ninterface ScreenShareProps {\n  track: Track;\n  width?: Property.Width;\n  height?: Property.Height;\n}\n\nexport const ScreenShareView = ({ track, width, height }: ScreenShareProps) => {\n  return (\n    <div className={styles.screenShare}>\n      <VideoRenderer\n        track={track}\n        isLocal={false}\n        width={width}\n        height={height}\n        className={styles.video}\n      />\n    </div>\n  );\n};\n","import { Participant } from \"livekit-client\";\nimport React, { useEffect, useState } from \"react\";\nimport { ControlsView } from \"../ControlsView\";\nimport { ParticipantView } from \"../ParticipantView\";\nimport { StageProps } from \"../StageProps\";\nimport styles from \"./styles.module.css\";\n\nexport const GridStage = ({\n  roomState,\n  participantRenderer,\n  controlRenderer,\n  onLeave,\n}: StageProps) => {\n  const { isConnecting, error, participants, room } = roomState;\n  const [visibleParticipants, setVisibleParticipants] = useState<Participant[]>(\n    []\n  );\n  const [showOverlay, setShowOverlay] = useState(false);\n  const [gridClass, setGridClass] = React.useState(styles.grid1x1);\n  console.log(visibleParticipants);\n\n  // compute visible participants and sort.\n  useEffect(() => {\n    // determine grid size\n    let numVisible = 1;\n    if (participants.length === 1) {\n      setGridClass(styles.grid1x1);\n    } else if (participants.length === 2) {\n      setGridClass(styles.grid2x1);\n      numVisible = 2;\n    } else if (participants.length <= 4) {\n      setGridClass(styles.grid2x2);\n      numVisible = Math.min(participants.length, 4);\n    } else if (participants.length <= 9) {\n      setGridClass(styles.grid3x3);\n      numVisible = Math.min(participants.length, 9);\n    } else if (participants.length <= 16) {\n      setGridClass(styles.grid4x4);\n      numVisible = Math.min(participants.length, 16);\n    } else {\n      setGridClass(styles.grid5x5);\n      numVisible = Math.min(participants.length, 25);\n    }\n\n    // remove any participants that are no longer connected\n    const newParticipants: Participant[] = [];\n    visibleParticipants.forEach((p) => {\n      if (\n        room?.participants.has(p.sid) ||\n        room?.localParticipant.sid === p.sid\n      ) {\n        newParticipants.push(p);\n      }\n    });\n\n    // ensure active speakers are all visible\n    room?.activeSpeakers?.forEach((speaker) => {\n      if (\n        newParticipants.includes(speaker) ||\n        (speaker !== room?.localParticipant &&\n          !room?.participants.has(speaker.sid))\n      ) {\n        return;\n      }\n      // find a non-active speaker and switch\n      const idx = newParticipants.findIndex((p) => !p.isSpeaking);\n      if (idx >= 0) {\n        newParticipants[idx] = speaker;\n      } else {\n        newParticipants.push(speaker);\n      }\n    });\n\n    // add other non speakers\n    for (const p of participants) {\n      if (newParticipants.length >= numVisible) {\n        break;\n      }\n      if (newParticipants.includes(p) || p.isSpeaking) {\n        continue;\n      }\n      newParticipants.push(p);\n    }\n\n    if (newParticipants.length > numVisible) {\n      newParticipants.splice(numVisible, newParticipants.length - numVisible);\n    }\n    setVisibleParticipants(newParticipants);\n  }, [participants]);\n\n  if (error) {\n    return <div>error {error.message}</div>;\n  }\n\n  if (isConnecting) {\n    return <div>connecting prince 12</div>;\n  }\n  if (!room) {\n    return <div>room closed</div>;\n  }\n\n  if (participants.length === 0) {\n    return <div>no one is in the room</div>;\n  }\n\n  const ParticipantRenderer = participantRenderer ?? ParticipantView;\n  const ControlRenderer = controlRenderer ?? ControlsView;\n\n  return (\n    // global container\n    <div className={styles.container}>\n      <div className={`${styles.gridStage} ${gridClass}`}>\n        {visibleParticipants.map((participant) => {\n          return (\n            <ParticipantRenderer\n              key={participant.identity}\n              participant={participant}\n              orientation=\"landscape\"\n              width=\"100%\"\n              height=\"100%\"\n              showOverlay={showOverlay}\n              showConnectionQuality\n              onMouseEnter={() => setShowOverlay(true)}\n              onMouseLeave={() => setShowOverlay(false)}\n            />\n          );\n        })}\n      </div>\n      <div className={styles.controlsArea}>\n        <ControlRenderer room={room} onLeave={onLeave} />\n      </div>\n    </div>\n  );\n};\n","import { LocalParticipant, Participant } from 'livekit-client';\n\n/**\n * Default sort for participants, it'll order participants by:\n * 1. dominant speaker (speaker with the loudest audio level)\n * 2. local participant\n * 3. other speakers that are recently active\n * 4. participants with video on\n * 5. by joinedAt\n */\nexport function defaultSortParticipants(participants: Participant[]): Participant[] {\n  const sortedParticipants = [...participants];\n  sortedParticipants.sort((a, b) => {\n    // loudest speaker first\n    if (a.isSpeaking && b.isSpeaking) {\n      return b.audioLevel - a.audioLevel;\n    }\n\n    // speaker goes first\n    if (a.isSpeaking !== b.isSpeaking) {\n      if (a.isSpeaking) {\n        return -1;\n      } else {\n        return 1;\n      }\n    }\n\n    // last active speaker first\n    if (a.lastSpokeAt !== b.lastSpokeAt) {\n      const aLast = a.lastSpokeAt?.getTime() ?? 0;\n      const bLast = b.lastSpokeAt?.getTime() ?? 0;\n      return bLast - aLast;\n    }\n\n    // video on\n    const aVideo = a.videoTracks.size > 0;\n    const bVideo = b.videoTracks.size > 0;\n    if (aVideo !== bVideo) {\n      if (aVideo) {\n        return -1;\n      } else {\n        return 1;\n      }\n    }\n\n    // joinedAt\n    return (a.joinedAt?.getTime() ?? 0) - (b.joinedAt?.getTime() ?? 0);\n  });\n  const localParticipant = sortedParticipants.find((p) => p instanceof LocalParticipant);\n  if (localParticipant) {\n    const localIdx = sortedParticipants.indexOf(localParticipant);\n    if (localIdx >= 0) {\n      sortedParticipants.splice(localIdx, 1);\n      if (sortedParticipants.length > 0) {\n        sortedParticipants.splice(1, 0, localParticipant);\n      } else {\n        sortedParticipants.push(localParticipant);\n      }\n    }\n  }\n  return sortedParticipants;\n}\n","import { Participant, Track, VideoTrack } from 'livekit-client';\nimport React, { ReactElement, useEffect, useState } from 'react';\nimport { ControlsView } from '../ControlsView';\nimport { ParticipantView } from '../ParticipantView';\nimport { ScreenShareView } from '../ScreenShareView';\nimport { StageProps } from '../StageProps';\nimport { defaultSortParticipants } from '../StageUtils';\nimport styles from './styles.module.css';\n\nexport const SpeakerStage = ({\n  roomState,\n  participantRenderer,\n  controlRenderer,\n  onLeave,\n  sortParticipants,\n}: StageProps) => {\n  const { isConnecting, error, participants, room } = roomState;\n  const [showOverlay, setShowOverlay] = useState(false);\n  const sortFn = sortParticipants ?? defaultSortParticipants;\n  const [sortedParticipants, setSortedParticipants] = useState(sortFn(participants));\n\n  useEffect(() => {\n    setSortedParticipants(sortFn(participants));\n  }, [participants, sortFn]);\n\n  if (error) {\n    return <div>error {error.message}</div>;\n  }\n\n  if (isConnecting) {\n    return <div>connecting</div>;\n  }\n  if (!room) {\n    return <div>room closed</div>;\n  }\n\n  if (sortedParticipants.length === 0) {\n    return <div>no one is in the room</div>;\n  }\n\n  const ParticipantRenderer = participantRenderer ?? ParticipantView;\n  const ControlRenderer = controlRenderer ?? ControlsView;\n\n  // find first participant with screen shared\n  let screenTrack: VideoTrack | undefined;\n  sortedParticipants.forEach((p) => {\n    if (screenTrack) {\n      return;\n    }\n    const track = p.getTrack(Track.Source.ScreenShare);\n    if (track?.isSubscribed && track.videoTrack) {\n      screenTrack = track.videoTrack;\n    }\n  });\n\n  let otherParticipants = sortedParticipants;\n  let participantInFocus: Participant;\n  let mainView: ReactElement;\n  if (screenTrack) {\n    mainView = <ScreenShareView track={screenTrack} height=\"100%\" width=\"100%\" />;\n  } else {\n    [participantInFocus, ...otherParticipants] = sortedParticipants;\n    mainView = (\n      <ParticipantRenderer\n        key={participantInFocus.identity}\n        participant={participantInFocus}\n        width=\"100%\"\n        height=\"100%\"\n        orientation=\"landscape\"\n        showOverlay={showOverlay}\n        showConnectionQuality\n        onMouseEnter={() => setShowOverlay(true)}\n        onMouseLeave={() => setShowOverlay(false)}\n      />\n    );\n  }\n\n  return (\n    // global container\n    <div className={styles.container}>\n      <div className={styles.stage}>\n        <div className={styles.stageCenter}>{mainView}</div>\n        <div className={styles.sidebar}>\n          {otherParticipants.map((participant) => {\n            return (\n              <ParticipantRenderer\n                key={participant.identity}\n                participant={participant}\n                width=\"100%\"\n                aspectWidth={16}\n                aspectHeight={9}\n                showOverlay={showOverlay}\n                onMouseEnter={() => setShowOverlay(true)}\n                onMouseLeave={() => setShowOverlay(false)}\n              />\n            );\n          })}\n        </div>\n      </div>\n      <div className={styles.controlsArea}>\n        <ControlRenderer room={room} onLeave={onLeave} />\n      </div>\n    </div>\n  );\n};\n","import { Participant, Track, VideoTrack } from 'livekit-client';\nimport React, { ReactElement, useEffect, useState } from 'react';\nimport { ControlsView } from '../ControlsView';\nimport { ParticipantView } from '../ParticipantView';\nimport { ScreenShareView } from '../ScreenShareView';\nimport { StageProps } from '../StageProps';\nimport { defaultSortParticipants } from '../StageUtils';\nimport styles from './styles.module.css';\n\nexport const MobileStage = ({\n  roomState,\n  participantRenderer,\n  controlRenderer,\n  onLeave,\n  sortParticipants,\n}: StageProps) => {\n  const { isConnecting, error, participants, room } = roomState;\n  const [showOverlay, setShowOverlay] = useState(false);\n  const sortFn = sortParticipants ?? defaultSortParticipants;\n  const [sortedParticipants, setSortedParticipants] = useState(sortFn(participants));\n\n  useEffect(() => {\n    setSortedParticipants(sortFn(participants));\n  }, [participants, sortFn]);\n\n  if (error) {\n    return <div>error {error.message}</div>;\n  }\n\n  if (isConnecting) {\n    return <div>connecting</div>;\n  }\n  if (!room) {\n    return <div>room closed</div>;\n  }\n\n  if (sortedParticipants.length === 0) {\n    return <div>no one is in the room</div>;\n  }\n\n  const ParticipantRenderer = participantRenderer ?? ParticipantView;\n  const ControlRenderer = controlRenderer ?? ControlsView;\n\n  // find first participant with screen shared\n  let screenTrack: VideoTrack | undefined;\n  sortedParticipants.forEach((p) => {\n    if (screenTrack) {\n      return;\n    }\n    const track = p.getTrack(Track.Source.ScreenShare);\n    if (track?.isSubscribed && track.videoTrack) {\n      screenTrack = track.videoTrack;\n    }\n  });\n\n  let otherParticipants = sortedParticipants;\n  let participantInFocus: Participant;\n  let mainView: ReactElement;\n  if (screenTrack) {\n    mainView = <ScreenShareView track={screenTrack} height=\"100%\" width=\"100%\" />;\n  } else if (otherParticipants.length === 0) {\n    mainView = <div>no one is in the room</div>;\n  } else {\n    [participantInFocus, ...otherParticipants] = otherParticipants;\n    mainView = (\n      <ParticipantRenderer\n        key={participantInFocus.identity}\n        participant={participantInFocus}\n        showOverlay={showOverlay}\n        width=\"100%\"\n        height=\"100%\"\n        orientation=\"portrait\"\n        showConnectionQuality\n        onMouseEnter={() => setShowOverlay(true)}\n        onMouseLeave={() => setShowOverlay(false)}\n      />\n    );\n  }\n\n  return (\n    // global container\n    <div className={styles.container}>\n      <div className={styles.stage}>{mainView}</div>\n      <div className={styles.participantsArea}>\n        {otherParticipants.map((participant) => {\n          return (\n            <ParticipantRenderer\n              key={participant.identity}\n              participant={participant}\n              className={styles.participant}\n              aspectWidth={4}\n              aspectHeight={3}\n              showOverlay={showOverlay}\n              onMouseEnter={() => setShowOverlay(true)}\n              onMouseLeave={() => setShowOverlay(false)}\n            />\n          );\n        })}\n      </div>\n      <div className={styles.controlsArea}>\n        <ControlRenderer room={room} enableScreenShare={false} onLeave={onLeave} />\n      </div>\n    </div>\n  );\n};\n","import { faVolumeMute } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Track, VideoTrack } from 'livekit-client';\nimport { AudioRenderer } from '@livekit/react-core';\nimport React, { ReactElement, useContext } from 'react';\nimport { useMediaQuery } from 'react-responsive';\nimport { GridStage } from './desktop/GridStage';\nimport { SpeakerStage } from './desktop/SpeakerStage';\nimport { DisplayContext } from './DisplayContext';\nimport { MobileStage } from './mobile/MobileStage';\nimport { StageProps } from './StageProps';\nimport styles from './styles.module.css';\n\nexport const StageView = (stageProps: StageProps) => {\n  const isMobile = useMediaQuery({ query: '(max-width: 800px)' });\n  const { room, participants } = stageProps.roomState;\n  const context = useContext(DisplayContext);\n\n  let mainElement: ReactElement;\n  if (isMobile) {\n    mainElement = <MobileStage {...stageProps} />;\n  } else {\n    // find first participant with screen shared\n    let screenTrack: VideoTrack | undefined;\n    participants.forEach((p) => {\n      if (screenTrack) {\n        return;\n      }\n      const track = p.getTrack(Track.Source.ScreenShare);\n      if (track?.isSubscribed && track.videoTrack) {\n        screenTrack = track.videoTrack;\n      }\n    });\n\n    if (context.stageLayout === 'grid' && screenTrack === undefined) {\n      mainElement = <GridStage {...stageProps} />;\n    } else {\n      mainElement = <SpeakerStage {...stageProps} />;\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      {mainElement}\n      {stageProps.roomState.audioTracks.map((track) => (\n        <AudioRenderer key={track.sid} track={track} isLocal={false} />\n      ))}\n\n      {room?.canPlaybackAudio === false && (\n        <div className={styles.overlay}>\n          <button\n            className={styles.unmuteButton}\n            onClick={() => {\n              room.startAudio();\n            }}\n          >\n            <FontAwesomeIcon className={styles.icon} size=\"1x\" icon={faVolumeMute} />\n            Click to Unmute\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n","import { Room, RoomOptions, RoomConnectOptions, ConnectionState } from 'livekit-client';\nimport React, { useEffect } from 'react';\nimport { ControlsProps } from './components/ControlsView';\nimport { ParticipantProps } from './components/ParticipantView';\nimport { StageProps } from './components/StageProps';\nimport { StageView } from './components/StageView';\nimport { useRoom } from '@livekit/react-core';\n\nexport interface RoomProps {\n  url: string;\n  token: string;\n  roomOptions?: RoomOptions;\n  connectOptions?: RoomConnectOptions;\n  // when first connected to room\n  onConnected?: (room: Room) => void;\n  // when user leaves the room\n  onLeave?: (room: Room) => void;\n  stageRenderer?: (props: StageProps) => React.ReactElement | null;\n  participantRenderer?: (props: ParticipantProps) => React.ReactElement | null;\n  controlRenderer?: (props: ControlsProps) => React.ReactElement | null;\n}\n\nexport const LiveKitRoom = ({\n  url,\n  token,\n  roomOptions,\n  connectOptions,\n  stageRenderer,\n  participantRenderer,\n  controlRenderer,\n  onConnected,\n  onLeave,\n}: RoomProps) => {\n  const roomState = useRoom(roomOptions);\n\n  useEffect(() => {\n    if (roomState.room) {\n      roomState.connect(url, token, connectOptions).then((room) => {\n        if (!room) {\n          return;\n        }\n        if (onConnected && room.state === ConnectionState.Connected) {\n          onConnected(room);\n        }\n      });\n    }\n    return () => {\n      if (roomState.room?.state !== ConnectionState.Disconnected) {\n        roomState.room?.disconnect();\n      }\n    };\n  }, [roomState.room]);\n\n  const selectedStageRenderer = stageRenderer ?? StageView;\n\n  return selectedStageRenderer({\n    roomState,\n    participantRenderer,\n    controlRenderer,\n    onLeave,\n  });\n};\n"],"names":["ControlButton","_ref","disabled","onClick","icon","className","menuItems","popoverContainerClassName","popoverTriggerBtnClassName","popoverTriggerBtnSeparatorClassName","onMenuItemClick","_useState","useState","menuVisible","setMenuVisible","classes","styles","button","handleMenuClick","item","menuTrigger","menu","React","length","hasDropdown","dropdown","separator","FontAwesomeIcon","height","faChevronDown","popoverMenu","list","map","i","key","label","mainContent","style","borderRadius","width","backgroundColor","faPhone","color","transform","Popover","isOpen","positions","content","buttonWrapper","AudioSelectButton","isMuted","onSourceSelected","isButtonDisabled","_ref$muteText","muteText","_ref$unmuteText","unmuteText","_ref$requestPermissio","requestPermissions","sources","setSources","_useState2","setMenuItems","listAudioDevices","useCallback","Room","getLocalDevices","then","devices","e","Promise","reject","useEffect","navigator","mediaDevices","addEventListener","removeEventListener","handleMenuItem","device","find","d","faMicrophoneSlash","faMicrophone","VideoSelectButton","isEnabled","_ref$disableText","disableText","_ref$enableText","enableText","listVideoDevices","faVideo","faVideoSlash","ControlsView","room","enableScreenShare","enableAudio","enableVideo","onLeave","_useParticipant","useParticipant","localParticipant","camPub","cameraPublication","micPub","microphonePublication","undefined","_React$useState","audioButtonDisabled","setAudioButtonDisabled","muteButton","_micPub$isMuted","enabled","setMicrophoneEnabled","resolve","switchActiveDevice","deviceId","_React$useState2","videoButtonDisabled","setVideoButtonDisabled","videoButton","_camPub$isMuted","setCameraEnabled","_React$useState3","screenButtonDisabled","setScreenButtonDisabled","screenButton","isScreenShareEnabled","faStop","faDesktop","setScreenShareEnabled","controlsWrapper","dangerButton","disconnect","DisplayContext","createContext","stageLayout","showStats","ParticipantView","participant","speakerClassName","aspectWidth","aspectHeight","orientation","displayName","showOverlay","showConnectionQuality","onMouseEnter","onMouseLeave","isLocal","connectionQuality","isSpeaking","videoSize","setVideoSize","currentBitrate","setCurrentBitrate","context","useContext","handleResize","interval","setInterval","total","tracks","forEach","pub","track","LocalTrack","RemoteTrack","clearInterval","containerStyles","objectFit","videoOrientation","dimensions","mainElement","isSubscribed","VideoRenderer","video","onSizeChanged","_participant$identity","display","justifyContent","alignItems","border","background","fontSize","identity","charAt","toUpperCase","push","speaker","isAudioMuted","isMicrophoneEnabled","statsContent","stats","Math","round","ConnectionQualityIndicator","ConnectionQuality","Excellent","connectionQuality3","Good","connectionQuality2","Poor","connectionQuality1","join","AspectRatio","ratio","participantBar","center","iconRed","iconNormal","ScreenShareView","screenShare","GridStage","roomState","participantRenderer","controlRenderer","isConnecting","error","participants","visibleParticipants","setVisibleParticipants","setShowOverlay","grid1x1","gridClass","setGridClass","console","log","numVisible","grid2x1","grid2x2","min","grid3x3","grid4x4","grid5x5","newParticipants","p","has","sid","_room$activeSpeakers","activeSpeakers","includes","idx","findIndex","_iterator","_createForOfIteratorHelperLoose","_step","done","value","splice","message","ParticipantRenderer","ControlRenderer","container","gridStage","controlsArea","defaultSortParticipants","sortedParticipants","concat","sort","a","b","audioLevel","lastSpokeAt","_a$lastSpokeAt$getTim","_a$lastSpokeAt","_b$lastSpokeAt$getTim","_b$lastSpokeAt","aLast","getTime","bLast","aVideo","videoTracks","size","bVideo","_a$joinedAt$getTime","_a$joinedAt","joinedAt","_b$joinedAt$getTime","_b$joinedAt","LocalParticipant","localIdx","indexOf","SpeakerStage","sortParticipants","sortFn","setSortedParticipants","screenTrack","getTrack","Track","Source","ScreenShare","videoTrack","otherParticipants","participantInFocus","mainView","slice","stage","stageCenter","sidebar","MobileStage","_otherParticipants","participantsArea","StageView","stageProps","isMobile","useMediaQuery","query","_stageProps$roomState","audioTracks","AudioRenderer","canPlaybackAudio","overlay","unmuteButton","startAudio","faVolumeMute","LiveKitRoom","url","token","roomOptions","connectOptions","stageRenderer","onConnected","useRoom","connect","state","ConnectionState","Connected","_roomState$room","Disconnected","_roomState$room2","selectedStageRenderer"],"mappings":"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"}